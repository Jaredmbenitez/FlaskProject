{% extends "layout.html" %}
{% block content %}

<script>
  function clickContact() {   //when the contact this seller button is clicked if we make this into a form
    document.getElementById("contact_form").style.display="block";
  }

  function offHelp() {
    document.getElementById("contact_form").style.display="none";
  }
</script>

<div class="row account-wrapper" style= "border:1px solid white">
  <div class="col-2 account-left">
    <div class="row account-card-row">
      <div class="account-card card" style="width: 18rem;">
        <img class="card-img-top" src="{{url_for('static',filename='images/blank-user.jpeg')}}" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title">{{userObj.username}}</h5>
          <p class="card-text"> Quick about me blurp with the account holder. </p>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Account Type:</li>
          <li class="list-group-item">Reputation Level:</li>
          
        </ul>
        <div class="row card-body">
          <a href= "#" class="col-sm card-link">Subscribe</a>
          <button class="col-sm btn card-link" onclick="clickContact();">Contact</button>
          <a href="#" class="col-sm card-link">Report</a>
        </div>
      </div>
    </div>
    <div class="row review-card-row">
      <div class="account-card card review-card" style="width: 18rem;">
        <div class="row d-flex justify-content-center mt-100">
          <div class="col-md-12 mb-6">
              <div class="card border-default">
                  <div class="card-body">
                      <div class="text-center">
                          <div class="d-inline align-baseline display-2 mr-1">{{userObj.seller_rating}}<span class="full-rating">/5</span></div>
                          <div class=" align-baseline text-sm text-warning mr-1"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>
                      </div>
                      <div class="pt-3"> <label class="text-medium text-sm">5 stars <span class="text-muted">- 34</span></label>
                          <div class="progress margin-bottom-1x">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 75%; height: 2px;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                          </div> <label class="text-medium text-sm">4 stars <span class="text-muted">- 9</span></label>
                          <div class="progress margin-bottom-1x">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 20%; height: 2px;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                          </div> <label class="text-medium text-sm">3 stars <span class="text-muted">- 2</span></label>
                          <div class="progress margin-bottom-1x">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 7%; height: 2px;" aria-valuenow="7" aria-valuemin="0" aria-valuemax="100"></div>
                          </div> <label class="text-medium text-sm">2 stars <span class="text-muted">- 1</span></label>
                          <div class="progress margin-bottom-1x">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 3%; height: 2px;" aria-valuenow="3" aria-valuemin="0" aria-valuemax="100"></div>
                          </div> <label class="text-medium text-sm">1 star <span class="text-muted">- 0</span></label>
                          <div class="progress mb-2">
                              <div class="progress-bar bg-warning" role="progressbar" style="width: 0; height: 2px;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                      </div>
                      <div class="pt-2"><a class="btn btn-warning btn-block" href="#" data-bs-toggle="modal" data-bs-target="#exampleModalCenter" data-abc="true">Leave a Review</a></div>

                  </div>
              </div>
          </div>
        </div>
      </div>

    </div>


  </div>

  <div class="col-9 account-right">
    <div class="row available-sales-row">
      <div class="availablesales-container container">

        <h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">Available Sales</h1>
      
        <hr class="mt-2 mb-5">
      
        <div class="row text-center text-lg-left">
      
          {% for object in allPhotoObjects %}
          <div class="col-lg-3 col-md-4 col-6">
            <div class="outer-div"> 
            <a href="{{url_for('itemDynamic', id=object.photo_id)}}" class="d-block mb-4 h-100">
                  <img class="img-fluid img-thumbnail account-pic" src="data:;base64,{{object.image}}" alt="">
                </a>
                  <h4> {{object.title}}</h4>
                  <p class="container-text">
                    {{object.title}}
                     Standard Digital:${{object.price}} <br> 
                     Digital with copyright: ${{object.copyright_price}} <br> 
                     Standard Print: ${{object.print_price}} <br>  
                  
                  </p>
                  <div class= "row">
                    <div class ="col">
                      {% if session["username"] == userObj.username %}
                        <form name="unlistItem" id="unlistItem" method="post" action="">                        
                          <button form = "unlistItem" name="unlistItemButton" id="unlistItemButton" type="submit" class="btn btn-outline-danger" value="{{object.photo_id}}">Remove Item</button>
                        </form>
                      {% endif %}
                    </div>
                    <div class ="col">
                      <a class = "btn btn-outline-primary" href="{{url_for('itemDynamic',id=object.photo_id)}}"> View </a>
                    </div>
                </div>
                
              </div>
                
          </div> 
      
          {% endfor %}
          
           
      
        </div>
      </div>
    </div>

    <div class="row best-sellers-row">
      <div>
        <div class="bestsales-container container">
       
         <h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">Best Sellers</h1>
       
         <hr class="mt-2 mb-5">
          <div class="row">
            {% for object in allPhotoObjects %}
            <div class="col-lg-3 col-md-4 col-6">
              <div class="outer-div"> 
              <a href="{{url_for('itemDynamic', id=object.photo_id)}}" class="d-block mb-4 h-100">
                    <img class="img-fluid img-thumbnail account-pic" src="data:;base64,{{object.image}}" alt="">
                  </a>
                    <h4> {{object.title}}</h4>
                    <p class="container-text">
                      {{object.title}}
                       Standard Digital:${{object.price}} <br> 
                       Digital with copyright: ${{object.copyright_price}} <br> 
                       Standard Print: ${{object.print_price}} <br>  
                    
                    </p>
                    <div class= "row">
                      <div class ="col">
                        {% if session["username"] == userObj.username %}
                          <form name="unlistItem" id="unlistItem" method="post" action="">                        
                            <button form = "unlistItem" name="unlistItemButton" id="unlistItemButton" type="submit" class="btn btn-outline-danger" value="{{object.photo_id}}">Remove Item</button>
                          </form>
                        {% endif %}
                      </div>
                      <div class ="col">
                        <a class = "btn btn-outline-primary" href="{{url_for('itemDynamic',id=object.photo_id)}}"> View </a>
                      </div>
                  </div>
                </div>
                  
            </div> 
        
            {% endfor %}
          </div>
           
         </div>
        </div>
    </div>

    <div class="row nsfw-button-row">
      <button class = "btn btn-warning reveal-nsfw" id = "reveal-nsfw"> 
        Allow NSFW Content 
      </button>

      <script type = "text/javascript">
        document.getElementById('reveal-nsfw').onclick=function(){
          document.getElementById('nsfw-container').style.display="block";
          window.location.href('#nsfw-container');
        }
        
        
      </script>
    </div>

    <div class="row nsfw-row">
      <div class="nsfw-container container" id = "nsfw-container">

        <h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">NSFW (adult content)</h1>
      
        <hr class="mt-2 mb-5">
      
        <div class="row text-center text-lg-left">
      
          <div class="col-lg-3 col-md-4 col-6">
            <a href="#" class="d-block mb-4 h-100">
                  <img class="img-fluid img-thumbnail" src="https://source.unsplash.com/pWkk7iiCoDM/400x300" alt="">
                  <p class="container-text"> Item name and price </p>
                </a>
          </div>
          <div class="col-lg-3 col-md-4 col-6">
            <a href="#" class="d-block mb-4 h-100">
                  <img class="img-fluid img-thumbnail" src="https://source.unsplash.com/aob0ukAYfuI/400x300" alt="">
                  <p class="container-text"> Item name and price </p>
                </a>
          </div>
          <div class="col-lg-3 col-md-4 col-6">
            <a href="#" class="d-block mb-4 h-100">
                  <img class="img-fluid img-thumbnail" src="https://source.unsplash.com/EMSDtjVHdQ8/400x300" alt="">
                  <p class="container-text"> Item name and price </p>
                </a>
          </div>
          <div class="col-lg-3 col-md-4 col-6">
            <a href="#" class="d-block mb-4 h-100">
                  <img class="img-fluid img-thumbnail" src="https://source.unsplash.com/M185_qYH8vg/400x300" alt="">
                  <p class="container-text"> Item name and price </p>
                </a>
          </div>
        </div>
       </div>
    </div>

  </div>



</div>

    <!--Contact Form-->
    {% if session.logged_in %}
        <div class="flex-container contact_form" id="contact_form">
            <input type="button" class="contact_cancel material-icons md-24" id="contact_cancel" onclick="offHelp();" value="highlight_off"/>
            <h1 class="border-bottom contact_head">Contact {{userObj.username}}</h1>
            <form method="POST" action="">
                {{ contactForm.hidden_tag() }}
                <fieldset class="form-group contact_fields">
                    <div class="form-group">
                        {{ contactForm.email.label(class="form-control-label") }} <br>
                        {% if contactForm.email.errors %} <!-- Error Messages -->
                            {{ contactForm.email(class="form-control form-control-lg is-invalid extra_info contact_field1")}} 
                            <div class="invalid-feedback"> 
                                {% for error in contactForm.email.errors %}
                                    <span> {{error}} </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ contactForm.email(class="form-control form-control-lg contact_field1")}}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{ contactForm.subject.label(class="form-control-label") }} <br>
                        {% if contactForm.subject.errors %} <!--for error handling-->
                            {{ contactForm.subject(class="form-contol form-control-lg is-invalid contact_field2", id="contact_field2") }}
                                <div class="invalid-feedback">
                                    {% for errors in contactForm.subject.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                        {% else %}
                            {{ contactForm.subject(class="form-contol form-control-lg contact_field2", id="contact_field2")}}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{ contactForm.message.label(class="form-conrtol-label") }} <br>
                        {% if contactForm.message.errors %} <!--for error handling-->
                            {{ contactForm.message(class="form-contol form-control-lg is-invalid contact_field3", id="contact_field3") }}
                                <div class="invalid-feedback">
                                    {% for errors in contactForm.message.errors %}
                                        <span>{{ error }}</span>
                                    {% endfor %}
                                </div>
                        {% else %}
                            {{ contactForm.message(class="form-contol form-control-lg contact_field3", id="contact_field3") }}
                        {% endif %}
                    </div>
                </fieldset>
                <div class="form-group contact_submit"><!--submit button-->
                    {{ contactForm.submit(class="btn btn-outline-info") }}
                </div>
            </form>
        </div>
    {% else %}
        <div class="flex-container log_contact_form" id="contact_form">
            <input type="button" class="log_contact_cancel material-icons md-24" id="log_contact_cancel" onclick="offHelp();" value="highlight_off"/>
            <h2 class="border-bottom log_contact_head">Please Log In To Contact This Seller</h2>
            <a href="{{url_for('login')}}">
                <button class="btn btn-primary active log_contact_button" id="log_contact_button" role="button" aria-disabled="true">Log In</button>
            </a>
        </div>
    {% endif %}
    <script>
        document.getElementById("contact_form").style.display="none";
    </script>
    
    <!--modal for review popup-->
    <div class="modal" id="exampleModalCenter" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Review Time</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form action="" method="POST" name= "postReviewForm" id="postReviewForm" enctype="multipart/form-data">
              <div class="form-group">
                <label for="inputFile"> Available attachment(s):</label>
                <input name="inputFile"  style = "margin-top: 1em;" id="inputFile" type="file" class="form-control" id="uploadImage"  onchange="document.getElementById('image-preview').src = window.URL.createObjectURL(this.files[0])">
              </div>
              
  
              <div class="form-group">
                <label for="description">Leave review for User:</label>
                <textarea name = "review-content" id= "review-content" class="form-control"  rows="3"></textarea>
              </div>
              <select class="form-select" form = "postReviewForm" name = "selectUserRating" id = "selectUserRating" aria-label="Default select example">
                <option selected>Rate this User</option>
                <option value="1">1 Stars</option>
                <option value="2">2 Stars</option>
                <option value="3">3 Stars</option>
                <option value="4">4 Stars</option>
                <option value="5">5 Stars</option>
              </select>    
            </form>
  
            
  
          </div>
          <div class="modal-footer">
            <button name = "closeModal" id ="closeModal"type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button name="submitReview" id="submitReview" type="submit" class="btn btn-primary" form="postReviewForm">Post Review</button>
          </div>
        </div>
      </div>
    </div>
{% endblock content %}